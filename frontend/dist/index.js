"use strict";(()=>{function n(){return"mtkEntry"in window?window.mtkEntry:null}function l(){let t=document.querySelectorAll(".cc-card"),e=document.getElementById("float-preview-box"),o=document.getElementById("float-preview-img");t.forEach(r=>{let i=r.querySelector("img.cc-card-preview")?.src;i&&(r.addEventListener("mouseover",a=>{let w=a.clientX<window.innerWidth/2,u=a.clientY<window.innerHeight/2;e.style.left="auto",u?(e.style.top="auto",e.style.bottom="0px"):(e.style.top="0px",e.style.bottom="auto"),o.src=i,e.style.display="block"}),r.addEventListener("mouseout",()=>{e.style.display="none"}))})}function s(t,e){let o=n();o===null||!o.is_video||jQuery.ajax("/api/video_history",{type:"POST",data:JSON.stringify({path:o.repo_path,current_ts:Math.floor(t),current_ratio:e}),contentType:"application/json"})}function d(){let t=document.querySelector("#mainvideo");t.addEventListener("timeupdate",e=>{s(t.currentTime,t.currentTime/t.duration)}),document.addEventListener("keyup",e=>{e.key==="k"?t.paused?t.play():t.pause():e.key==="j"?t.currentTime-=10:e.key==="l"&&(t.currentTime+=10),e.key==="f"&&(document.fullscreenElement===null?t.requestFullscreen():document.exitFullscreen())})}function y(){let t=document.getElementById("save-paste-btn"),e=document.getElementById("save-url-input");!t||!e||t.addEventListener("click",async()=>{if(!navigator.clipboard||!navigator.clipboard.readText){alert("Clipboard access is not available");return}try{let o=await navigator.clipboard.readText();if(o.length===0)return;e.value=o,e.focus(),e.select()}catch(o){console.error("Failed to read clipboard",o),alert("Could not read from clipboard")}})}function c(){y()}addEventListener("DOMContentLoaded",()=>{l()});addEventListener("DOMContentLoaded",()=>{let t=n();t===null||!t.is_video||d()});addEventListener("DOMContentLoaded",()=>{c()});function f(t){if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{console.log("copy done")}).catch(()=>{alert("error")});else{let e=document.createElement("textarea");e.value=t,e.style.position="absolute",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),e.remove()}}window.writeToClipboard=f;})();
//# sourceMappingURL=index.js.map
