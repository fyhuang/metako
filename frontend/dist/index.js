"use strict";(()=>{function r(){return"mtkEntry"in window?window.mtkEntry:null}function a(){let t=document.querySelectorAll(".cc-card"),e=document.getElementById("float-preview-box"),o=document.getElementById("float-preview-img");t.forEach(n=>{let i=n.querySelector("img.cc-card-preview")?.src;i&&(n.addEventListener("mouseover",l=>{let f=l.clientX<window.innerWidth/2,c=l.clientY<window.innerHeight/2;e.style.left="auto",c?(e.style.top="auto",e.style.bottom="0px"):(e.style.top="0px",e.style.bottom="auto"),o.src=i,e.style.display="block"}),n.addEventListener("mouseout",()=>{e.style.display="none"}))})}function s(t,e){let o=r();o===null||!o.is_video||jQuery.ajax("/api/video_history",{type:"POST",data:JSON.stringify({path:o.repo_path,current_ts:Math.floor(t),current_ratio:e}),contentType:"application/json"})}function d(){let t=document.querySelector("#mainvideo");t.addEventListener("timeupdate",e=>{s(t.currentTime,t.currentTime/t.duration)}),document.addEventListener("keyup",e=>{e.key==="k"?t.paused?t.play():t.pause():e.key==="j"?t.currentTime-=10:e.key==="l"&&(t.currentTime+=10),e.key==="f"&&(document.fullscreenElement===null?t.requestFullscreen():document.exitFullscreen())})}addEventListener("DOMContentLoaded",()=>{a()});addEventListener("DOMContentLoaded",()=>{let t=r();t===null||!t.is_video||d()});function p(t){if(navigator.clipboard)navigator.clipboard.writeText(t).then(()=>{console.log("copy done")}).catch(()=>{alert("error")});else{let e=document.createElement("textarea");e.value=t,e.style.position="absolute",e.style.opacity="0",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),e.remove()}}window.writeToClipboard=p;})();
//# sourceMappingURL=index.js.map
