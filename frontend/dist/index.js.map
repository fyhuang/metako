{
  "version": 3,
  "sources": ["../src/entry.mts", "../src/history.mts", "../src/video.mts", "../src/index.mts"],
  "sourcesContent": ["// This is just a copy of EntryRenderer that can be accessed from JS\ninterface RenderedEntry {\n    repo_path: string;\n\n    is_video: boolean;\n}\n\nexport function currEntry(): RenderedEntry | null {\n    if (!('mtkEntry' in window)) {\n        return null;\n    }\n\n    const mtkEntry = window.mtkEntry as RenderedEntry;\n    return mtkEntry;\n}", "import { currEntry } from './entry.mts';\n\nexport function markViewed(progress: number, ratio: number): void {\n    // TODO: implement new sessions API\n    // TODO: work for more than video\n    const entry = currEntry();\n    if (entry === null || !entry.is_video) {\n        return;\n    }\n\n    jQuery.ajax(\n        '/api/video_history',\n        {\n            type: \"POST\",\n            data: JSON.stringify({\n                // TODO(fyhuang): escape?\n                \"path\": entry.repo_path,\n                \"current_ts\": Math.floor(progress),\n                \"current_ratio\": ratio,\n            }),\n            contentType: \"application/json\",\n        },\n    );\n}", "import { markViewed } from './history.mts';\n\nexport function setupVideoPlayer(): void {\n    const mainVideo = document.querySelector('#mainvideo') as HTMLVideoElement;\n\n    // Update history\n    mainVideo.addEventListener('timeupdate', (event) => {\n        markViewed(mainVideo.currentTime, mainVideo.currentTime / mainVideo.duration);\n    });\n\n    // YouTube-style keyboard shortcuts\n    document.addEventListener('keyup', (event) => {\n        // Play/pause/seek\n        if (event.key === 'k') {\n            if (mainVideo.paused) {\n                mainVideo.play();\n            } else {\n                mainVideo.pause();\n            }\n        } else if (event.key === 'j') {\n            mainVideo.currentTime -= 10;\n        } else if (event.key === 'l') {\n            mainVideo.currentTime += 10;\n        }\n\n        // Fullscreen\n        if (event.key === 'f') {\n            if (document.fullscreenElement === null) {\n                mainVideo.requestFullscreen();\n            } else {\n                document.exitFullscreen();\n            }\n        }\n    });\n}\n", "import { currEntry } from './entry.mts';\nimport * as video from './video.mts';\n\n// Set up video stuff\naddEventListener('DOMContentLoaded', () => {\n    const entry = currEntry();\n    if (entry === null || !entry.is_video) {\n        return;\n    }\n    video.setupVideoPlayer();\n});\n\n// Utility function for writing to clipboard\nfunction writeToClipboard(text: string) {\n    if (navigator.clipboard) {\n        navigator.clipboard.writeText(text)\n            .then(() => { console.log(\"copy done\"); })\n            .catch(() => { alert(\"error\"); });\n    } else {\n        let textArea = document.createElement(\"textarea\");\n        textArea.value = text;\n        textArea.style.position = \"absolute\";\n        textArea.style.opacity = \"0\";\n        \n        document.body.appendChild(textArea);\n        textArea.focus();\n        textArea.select();\n\n        document.execCommand('copy');\n        textArea.remove();\n    }\n}\n(window as any).writeToClipboard = writeToClipboard;\n"],
  "mappings": "mBAOO,SAASA,GAAkC,CAC9C,MAAM,aAAc,OAIH,OAAO,SAHb,IAKf,CCZO,SAASC,EAAWC,EAAkBC,EAAqB,CAG9D,IAAMC,EAAQC,EAAU,EACpBD,IAAU,MAAQ,CAACA,EAAM,UAI7B,OAAO,KACH,qBACA,CACI,KAAM,OACN,KAAM,KAAK,UAAU,CAEjB,KAAQA,EAAM,UACd,WAAc,KAAK,MAAMF,CAAQ,EACjC,cAAiBC,CACrB,CAAC,EACD,YAAa,kBACjB,CACJ,CACJ,CCrBO,SAASG,GAAyB,CACrC,IAAMC,EAAY,SAAS,cAAc,YAAY,EAGrDA,EAAU,iBAAiB,aAAeC,GAAU,CAChDC,EAAWF,EAAU,YAAaA,EAAU,YAAcA,EAAU,QAAQ,CAChF,CAAC,EAGD,SAAS,iBAAiB,QAAUC,GAAU,CAEtCA,EAAM,MAAQ,IACVD,EAAU,OACVA,EAAU,KAAK,EAEfA,EAAU,MAAM,EAEbC,EAAM,MAAQ,IACrBD,EAAU,aAAe,GAClBC,EAAM,MAAQ,MACrBD,EAAU,aAAe,IAIzBC,EAAM,MAAQ,MACV,SAAS,oBAAsB,KAC/BD,EAAU,kBAAkB,EAE5B,SAAS,eAAe,EAGpC,CAAC,CACL,CC9BA,iBAAiB,mBAAoB,IAAM,CACvC,IAAMG,EAAQC,EAAU,EACpBD,IAAU,MAAQ,CAACA,EAAM,UAGvBE,EAAiB,CAC3B,CAAC,EAGD,SAASC,EAAiBC,EAAc,CACpC,GAAI,UAAU,UACV,UAAU,UAAU,UAAUA,CAAI,EAC7B,KAAK,IAAM,CAAE,QAAQ,IAAI,WAAW,CAAG,CAAC,EACxC,MAAM,IAAM,CAAE,MAAM,OAAO,CAAG,CAAC,MACjC,CACH,IAAIC,EAAW,SAAS,cAAc,UAAU,EAChDA,EAAS,MAAQD,EACjBC,EAAS,MAAM,SAAW,WAC1BA,EAAS,MAAM,QAAU,IAEzB,SAAS,KAAK,YAAYA,CAAQ,EAClCA,EAAS,MAAM,EACfA,EAAS,OAAO,EAEhB,SAAS,YAAY,MAAM,EAC3BA,EAAS,OAAO,CACpB,CACJ,CACC,OAAe,iBAAmBF",
  "names": ["currEntry", "markViewed", "progress", "ratio", "entry", "currEntry", "setupVideoPlayer", "mainVideo", "event", "markViewed", "entry", "currEntry", "setupVideoPlayer", "writeToClipboard", "text", "textArea"]
}
